<div class="d-flex justify-content-center align-items-center" *ngIf="isLoading">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<div *ngIf="game && !isLoading">
  <div class="game-details-container" *ngIf="game; else errorTemplate">
    <h2>ğŸ® Game Stats</h2>
  
    <!-- Player Info and Score Section -->
    <section class="player-info">
      <div class="players">
        <span class="player">{{ game.player1.username }}</span>
        <span class="vs">VS</span>
        <span class="player">{{ game.player2.username || 'AI' }}</span>
      </div>
      <div class="score">
        <span>{{ game.score_player1 }}</span>
        <span class="colon">:</span>
        <span>{{ game.score_player2 }}</span>
      </div>
      <div class="game-mode">{{ game.game_mode }}</div>
      <div class="game-status">
        <span [ngClass]="{
          'status-running': getGameStatus(game) === 'Running',
          'status-canceled': getGameStatus(game) === 'Canceled',
          'status-completed': getGameStatus(game) === 'Completed'
        }">
          {{ getGameStatus(game) }}
        </span>
        <span *ngIf="game.is_completed" class="winner">ğŸ† Winner: {{ game.winner?.username || 'AI' }}</span>
      </div>
    </section>
  
    <!-- Game Times Section -->
    <section class="game-times">
      <div class="time-box">
        <div class="time-label">Game Started</div>
        <div class="time-value">{{ game.start_time | date:'MMMM d, yyyy, h:mm:ss a' }}</div>
      </div>
      <div class="time-box">
        <div class="time-label">Game Ended</div>
        <div class="time-value">{{ game.end_time | date:'MMMM d, yyyy, h:mm:ss a' }}</div>
      </div>
      <div class="duration-box">
        <div class="duration-label">â± Duration</div>
        <div class="duration-value">
          {{ game.duration ? (game.duration | duration) : 'N/A' }}
        </div>
      </div>
    </section>
  
    <!-- Rounds Info -->
    <section class="rounds-info" *ngIf="game.rounds?.length">
      <h3>ğŸ† Rounds</h3>
      <ul>
        <li *ngFor="let round of game.rounds">
          <div class="round-header">Round {{ round.round_number }}</div>
          <div class="round-details">
            <span>â² Start: {{ round.start_time | date:'mediumTime' }}</span>
            <span *ngIf="round.end_time">â² End: {{ round.end_time | date:'mediumTime' }}</span>
            <span>Score: {{ round.score_player1 }} - {{ round.score_player2 }}</span>
            <span>Winner: {{ round.winner }}</span>
          </div>
        </li>
      </ul>
    </section>
  
    <!-- Move Log -->
    <section class="moves-log" *ngIf="game.moves_log?.length">
      <h3>ğŸ“œ Move Log</h3>
      <table>
        <thead>
          <tr>
            <th>Time</th>
            <th>Player</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let move of game.moves_log">
            <td>{{ move.time | date:'mediumTime' }}</td>
            <td>{{ move.player }}</td>
            <td>{{ move.action }}</td>
          </tr>
        </tbody>
      </table>
    </section>
  </div>
  
  <ng-template #errorTemplate>
    <p class="error-message">âŒ {{ errorMessage }}</p>
  </ng-template>
  
</div>

